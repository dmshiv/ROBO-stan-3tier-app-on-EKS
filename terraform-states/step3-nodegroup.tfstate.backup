{
  "version": 4,
  "terraform_version": "1.12.2",
  "serial": 10,
  "lineage": "1207bc9c-e223-9c51-d9a8-cd1381e672dd",
  "outputs": {
    "cluster_endpoint": {
      "value": "https://A46C15DBC2EAAF6AB86C58435F166D94.gr7.eu-central-1.eks.amazonaws.com",
      "type": "string"
    },
    "cluster_name": {
      "value": "robot-shop-eks-cluster",
      "type": "string"
    },
    "node_group_arn": {
      "value": "arn:aws:eks:eu-central-1:886511165402:nodegroup/robot-shop-eks-cluster/robot-shop-eks-cluster-node-group/92cd721c-a3c6-4795-4b35-b87c8d3a3c81",
      "type": "string"
    },
    "node_group_name": {
      "value": "robot-shop-eks-cluster-node-group",
      "type": "string"
    },
    "node_group_status": {
      "value": "ACTIVE",
      "type": "string"
    },
    "node_role_arn": {
      "value": "arn:aws:iam::886511165402:role/robot-shop-eks-cluster-node-group-role",
      "type": "string"
    },
    "node_security_group_id": {
      "value": "sg-00fd2e26c3e100d94",
      "type": "string"
    },
    "region": {
      "value": "eu-central-1",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "terraform_remote_state",
      "name": "eks",
      "provider": "provider[\"terraform.io/builtin/terraform\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "backend": "local",
            "config": {
              "value": {
                "path": "../terraform-states/step2-eks.tfstate"
              },
              "type": [
                "object",
                {
                  "path": "string"
                }
              ]
            },
            "defaults": null,
            "outputs": {
              "value": {
                "cluster_arn": "arn:aws:eks:eu-central-1:886511165402:cluster/robot-shop-eks-cluster",
                "cluster_certificate_authority_data": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURCVENDQWUyZ0F3SUJBZ0lJS3E2MTJzSmo4bzB3RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TlRFeU1ETXhNakk1TkRkYUZ3MHpOVEV5TURFeE1qTTBORGRhTUJVeApFekFSQmdOVkJBTVRDbXQxWW1WeWJtVjBaWE13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLCkFvSUJBUURSbVZWcEV1ZkRNejRwTUZ1REYveEJwazFxZTIrOWp3TlRDRG1sRDhrQXpyOXU1eGw1OEdQOEFzaTgKY28ybzVYUTl6d0p4RUtZajc3Nlp2SVhWYVU4dE5NUHVOWG1uUEdpNXlnYWRwNVlJRDNxZnJNdksvdUtlKzFIbQpBSHQwdXBpRTdHY0FFTUR5d2NBMjFXaDMxWDY4aXhQVmdybHp2RzdRbjJoQ3FUb1ZqQUY4QkY1eDZzOEpjTGdjCk5LYy9Vem5EVlpwVzFYSEI1akxNd2Fyb1JSTUpUR2RtaVFrV0kxem5JQXMvajE5Z1o3QTQzZjZ4ZHdJRGlCNUUKaWovcENsbmtTOFE5aG9KN0lEZ2JBSi9qWTNub3JONlNpQm84RG9TYVh0bmJUeXlMQTIvQ0tBOWdOTUFFc2RTQgpmUi9wUENyWUhuQm81TllMakQ5Tmt3akwyekNmQWdNQkFBR2pXVEJYTUE0R0ExVWREd0VCL3dRRUF3SUNwREFQCkJnTlZIUk1CQWY4RUJUQURBUUgvTUIwR0ExVWREZ1FXQkJTb3preFJYV2Z5RGxxem1ROHhTVGJadmZqS1RUQVYKQmdOVkhSRUVEakFNZ2dwcmRXSmxjbTVsZEdWek1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQWFvcmNBTXBxNQpnenVPR2ttMVhURXRFT0lybk5waTlFTnlncEhSZGVDVDdqRk14RlJhdEZGeUNqb2UvMzU3Y1pyQzd5T1NtRi9CCjQyeHVGMVdhZkJ4TWxVQkZvWDVQWUtsMXVyY3prU2FNc1dDV0xrOVBCekx0c0cxWk12L2lvZ0YxZE4wc0F2d2UKM014V3R4dHlNZEd5eWhBYzVmdm9DM3h6T2MzVkdKaFZ1U09LY01QSzZHai9SRVJkQlkvYVFpZHJWL1FHMEVQbAp4MFNaZDJlbjQ0ZEU4MkxIZGxDV1NBRmhnWjlHUEkxYzV1YUJ5Tkl2bjRldTBHZTdlRUZNdy8xbHN0MmVmUFU5Cm4zR2NaT2R0WEpBeUM0cWU1MnQzVWtQQm1kZzI1MVM5Z3V3STZ6K05BRzBmaVZvU1NVZE4vcDNjUEo3R0Z5NzQKOFdsUTNmVzJzODBpCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K",
                "cluster_endpoint": "https://A46C15DBC2EAAF6AB86C58435F166D94.gr7.eu-central-1.eks.amazonaws.com",
                "cluster_name": "robot-shop-eks-cluster",
                "cluster_security_group_id": "sg-0cc0ca1d80984e8e9",
                "cluster_version": "1.28",
                "oidc_issuer": "https://oidc.eks.eu-central-1.amazonaws.com/id/A46C15DBC2EAAF6AB86C58435F166D94",
                "oidc_provider_arn": "arn:aws:iam::886511165402:oidc-provider/oidc.eks.eu-central-1.amazonaws.com/id/A46C15DBC2EAAF6AB86C58435F166D94",
                "oidc_provider_url": "oidc.eks.eu-central-1.amazonaws.com/id/A46C15DBC2EAAF6AB86C58435F166D94",
                "private_subnet_ids": [
                  "subnet-0795431248436e675",
                  "subnet-0ac562ca7caeb09aa"
                ],
                "public_subnet_ids": [
                  "subnet-0e543c1f454f2dad9",
                  "subnet-0df05aa9d93206036"
                ],
                "region": "eu-central-1",
                "vpc_id": "vpc-0d4a801a4012c8438"
              },
              "type": [
                "object",
                {
                  "cluster_arn": "string",
                  "cluster_certificate_authority_data": "string",
                  "cluster_endpoint": "string",
                  "cluster_name": "string",
                  "cluster_security_group_id": "string",
                  "cluster_version": "string",
                  "oidc_issuer": "string",
                  "oidc_provider_arn": "string",
                  "oidc_provider_url": "string",
                  "private_subnet_ids": [
                    "tuple",
                    [
                      "string",
                      "string"
                    ]
                  ],
                  "public_subnet_ids": [
                    "tuple",
                    [
                      "string",
                      "string"
                    ]
                  ],
                  "region": "string",
                  "vpc_id": "string"
                }
              ]
            },
            "workspace": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "data",
      "type": "terraform_remote_state",
      "name": "vpc",
      "provider": "provider[\"terraform.io/builtin/terraform\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "backend": "local",
            "config": {
              "value": {
                "path": "../terraform-states/step1-vpc.tfstate"
              },
              "type": [
                "object",
                {
                  "path": "string"
                }
              ]
            },
            "defaults": null,
            "outputs": {
              "value": {
                "availability_zones": [
                  "eu-central-1a",
                  "eu-central-1b"
                ],
                "cluster_name": "robot-shop-eks-cluster",
                "internet_gateway_id": "igw-0a19c68d06bcb6826",
                "nat_gateway_ids": [
                  "nat-07f44e4667fa363b1",
                  "nat-0040300a87f7482d6"
                ],
                "private_subnet_cidrs": [
                  "10.0.10.0/24",
                  "10.0.20.0/24"
                ],
                "private_subnet_ids": [
                  "subnet-0795431248436e675",
                  "subnet-0ac562ca7caeb09aa"
                ],
                "public_subnet_cidrs": [
                  "10.0.1.0/24",
                  "10.0.2.0/24"
                ],
                "public_subnet_ids": [
                  "subnet-0e543c1f454f2dad9",
                  "subnet-0df05aa9d93206036"
                ],
                "region": "eu-central-1",
                "vpc_cidr": "10.0.0.0/16",
                "vpc_id": "vpc-0d4a801a4012c8438"
              },
              "type": [
                "object",
                {
                  "availability_zones": [
                    "list",
                    "string"
                  ],
                  "cluster_name": "string",
                  "internet_gateway_id": "string",
                  "nat_gateway_ids": [
                    "tuple",
                    [
                      "string",
                      "string"
                    ]
                  ],
                  "private_subnet_cidrs": [
                    "tuple",
                    [
                      "string",
                      "string"
                    ]
                  ],
                  "private_subnet_ids": [
                    "tuple",
                    [
                      "string",
                      "string"
                    ]
                  ],
                  "public_subnet_cidrs": [
                    "tuple",
                    [
                      "string",
                      "string"
                    ]
                  ],
                  "public_subnet_ids": [
                    "tuple",
                    [
                      "string",
                      "string"
                    ]
                  ],
                  "region": "string",
                  "vpc_cidr": "string",
                  "vpc_id": "string"
                }
              ]
            },
            "workspace": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_eks_node_group",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "ami_type": "AL2_x86_64",
            "arn": "arn:aws:eks:eu-central-1:886511165402:nodegroup/robot-shop-eks-cluster/robot-shop-eks-cluster-node-group/92cd721c-a3c6-4795-4b35-b87c8d3a3c81",
            "capacity_type": "ON_DEMAND",
            "cluster_name": "robot-shop-eks-cluster",
            "disk_size": 30,
            "force_update_version": null,
            "id": "robot-shop-eks-cluster:robot-shop-eks-cluster-node-group",
            "instance_types": [
              "t3.medium"
            ],
            "labels": {
              "environment": "development",
              "role": "worker"
            },
            "launch_template": [],
            "node_group_name": "robot-shop-eks-cluster-node-group",
            "node_group_name_prefix": "",
            "node_repair_config": [],
            "node_role_arn": "arn:aws:iam::886511165402:role/robot-shop-eks-cluster-node-group-role",
            "release_version": "1.28.15-20251112",
            "remote_access": [],
            "resources": [
              {
                "autoscaling_groups": [
                  {
                    "name": "eks-robot-shop-eks-cluster-node-group-92cd721c-a3c6-4795-4b35-b87c8d3a3c81"
                  }
                ],
                "remote_access_security_group_id": ""
              }
            ],
            "scaling_config": [
              {
                "desired_size": 2,
                "max_size": 4,
                "min_size": 2
              }
            ],
            "status": "ACTIVE",
            "subnet_ids": [
              "subnet-0795431248436e675",
              "subnet-0ac562ca7caeb09aa"
            ],
            "tags": {
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Project": "Robot-Shop-EKS"
            },
            "tags_all": {
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Owner": "DevOps-Team",
              "Project": "Robot-Shop-EKS"
            },
            "taint": [],
            "timeouts": null,
            "update_config": [
              {
                "max_unavailable": 1,
                "max_unavailable_percentage": 0
              }
            ],
            "version": "1.28"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozNjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInVwZGF0ZSI6MzYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "aws_iam_role.node_group",
            "aws_iam_role_policy_attachment.node_AmazonEC2ContainerRegistryReadOnly",
            "aws_iam_role_policy_attachment.node_AmazonEKSWorkerNodePolicy",
            "aws_iam_role_policy_attachment.node_AmazonEKS_CNI_Policy",
            "aws_iam_role_policy_attachment.node_AmazonSSMManagedInstanceCore",
            "data.terraform_remote_state.eks",
            "data.terraform_remote_state.vpc"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "node_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::886511165402:role/robot-shop-eks-cluster-node-group-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-12-03T12:39:06Z",
            "description": "",
            "force_detach_policies": false,
            "id": "robot-shop-eks-cluster-node-group-role",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "robot-shop-eks-cluster-node-group-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Project": "Robot-Shop-EKS"
            },
            "tags_all": {
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Owner": "DevOps-Team",
              "Project": "Robot-Shop-EKS"
            },
            "unique_id": "AROA442BO37NNQIVICC4I"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "data.terraform_remote_state.eks"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "node_AmazonEC2ContainerRegistryReadOnly",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "robot-shop-eks-cluster-node-group-role-20251203123909311300000003",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly",
            "role": "robot-shop-eks-cluster-node-group-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.node_group",
            "data.terraform_remote_state.eks"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "node_AmazonEKSWorkerNodePolicy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "robot-shop-eks-cluster-node-group-role-20251203123908994900000002",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy",
            "role": "robot-shop-eks-cluster-node-group-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.node_group",
            "data.terraform_remote_state.eks"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "node_AmazonEKS_CNI_Policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "robot-shop-eks-cluster-node-group-role-20251203123908487800000001",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy",
            "role": "robot-shop-eks-cluster-node-group-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.node_group",
            "data.terraform_remote_state.eks"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "node_AmazonSSMManagedInstanceCore",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "robot-shop-eks-cluster-node-group-role-20251203123909311600000004",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore",
            "role": "robot-shop-eks-cluster-node-group-role"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.node_group",
            "data.terraform_remote_state.eks"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_security_group",
      "name": "node_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:eu-central-1:886511165402:security-group/sg-00fd2e26c3e100d94",
            "description": "Security group for EKS worker nodes",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "Allow all outbound traffic",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": false,
                "to_port": 0
              }
            ],
            "id": "sg-00fd2e26c3e100d94",
            "ingress": [
              {
                "cidr_blocks": [],
                "description": "Allow HTTPS from cluster control plane",
                "from_port": 443,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-0cc0ca1d80984e8e9"
                ],
                "self": false,
                "to_port": 443
              },
              {
                "cidr_blocks": [],
                "description": "Allow all traffic within the node group",
                "from_port": 0,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "-1",
                "security_groups": [],
                "self": true,
                "to_port": 0
              },
              {
                "cidr_blocks": [],
                "description": "Allow kubelet API from control plane",
                "from_port": 10250,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [
                  "sg-0cc0ca1d80984e8e9"
                ],
                "self": false,
                "to_port": 10250
              }
            ],
            "name": "robot-shop-eks-cluster-node-group-sg",
            "name_prefix": "",
            "owner_id": "886511165402",
            "revoke_rules_on_delete": false,
            "tags": {
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Name": "robot-shop-eks-cluster-node-group-sg",
              "Project": "Robot-Shop-EKS",
              "kubernetes.io/cluster/robot-shop-eks-cluster": "owned"
            },
            "tags_all": {
              "Environment": "Development",
              "ManagedBy": "Terraform",
              "Name": "robot-shop-eks-cluster-node-group-sg",
              "Owner": "DevOps-Team",
              "Project": "Robot-Shop-EKS",
              "kubernetes.io/cluster/robot-shop-eks-cluster": "owned"
            },
            "timeouts": null,
            "vpc_id": "vpc-0d4a801a4012c8438"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6OTAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "data.terraform_remote_state.eks",
            "data.terraform_remote_state.vpc"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_security_group_rule",
      "name": "cluster_inbound_from_nodes",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 2,
          "attributes": {
            "cidr_blocks": null,
            "description": "Allow worker nodes to communicate with cluster API",
            "from_port": 443,
            "id": "sgrule-1881815040",
            "ipv6_cidr_blocks": null,
            "prefix_list_ids": null,
            "protocol": "tcp",
            "security_group_id": "sg-0cc0ca1d80984e8e9",
            "security_group_rule_id": "sgr-0d40f260ae6f0fd7a",
            "self": false,
            "source_security_group_id": "sg-00fd2e26c3e100d94",
            "timeouts": null,
            "to_port": 443,
            "type": "ingress"
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjIifQ==",
          "dependencies": [
            "aws_security_group.node_group",
            "data.terraform_remote_state.eks",
            "data.terraform_remote_state.vpc"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "wait_for_nodes",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "7252626581884404057",
            "triggers": null
          },
          "sensitive_attributes": [],
          "identity_schema_version": 0,
          "dependencies": [
            "aws_eks_node_group.main",
            "aws_iam_role.node_group",
            "aws_iam_role_policy_attachment.node_AmazonEC2ContainerRegistryReadOnly",
            "aws_iam_role_policy_attachment.node_AmazonEKSWorkerNodePolicy",
            "aws_iam_role_policy_attachment.node_AmazonEKS_CNI_Policy",
            "aws_iam_role_policy_attachment.node_AmazonSSMManagedInstanceCore",
            "data.terraform_remote_state.eks",
            "data.terraform_remote_state.vpc"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
